<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>eNotis+</title>
 	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<link rel="canonical" href="https://weather-pwa-sample.firebaseapp.com/final/">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" type="text/css" href="../styles/inline.css">
	
	<!-- Add to home screen for Safari on iOS -->
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	<meta name="apple-mobile-web-app-title" content="Weather PWA">
	<link rel="apple-touch-icon" href="images/icons/icon-152x152.png">
	<meta name="msapplication-TileImage" content="images/icons/icon-144x144.png">
	<meta name="msapplication-TileColor" content="#2F3BA2">
	
	<!-- user script -->
	<script type="text/javascript" src="../js/jquery-1.9.1.min.js"></script>
	<link rel="stylesheet" href="../material.min.css">
	<script src="../material.min.js"></script>
	<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
	<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
	<link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css">
	<script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
	<link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-blue.min.css" />
</head>
<body>
	<header class="header">
		<h1 class="header__title">Weather PWA</h1>
		<button id="butRefresh" class="headerButton" aria-label="Refresh"></button>
		<button id="butAdd" class="headerButton" aria-label="Add"></button>
	</header>
	<!-- 본문 시작 -->
	<main class="main">
	<form name="loginForm" id="loginForm" method="post">

	<table border="1">
		<tr>

			<td>아이디</td>
			<td><input type="text" name="id" id="id"/></td>
		</tr>
		<tr>
			<td>패스워드</td>
			<td><input type="text" name="pw" id="pw"/></td>
		</tr>
		<tr align="center">
			<td colspan="2">
				<button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent" type="submit" id="submit">
				  로그인
				</button>
			</td>
		</tr>
	</table>
				<button class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored" onclick="getMail()">
				  <i class="material-icons">add</i>
				</button>
	</form>
		</main>
	<!-- 본문 끝 -->
	<script>
		$(document).ready(function(){
			// 로그인btn click
			$("#submit").click(function(e){
				var frm = document.getElementById("loginForm");
				frm.method="POST";
				frm.action="/eNotisPlus/main/login.do";
				frm.submit();
				e.preventDefault();
			})
			
			$(".main").click(function(e)){
				console.log(navigator.online);
			}
		})
		
		function login(){
			$('input[name="zlogin_id"]').val();
			$('#loginForm').attr('action','/PWA/sample/getMail2.do');
			$('#loginForm').submit();
		}
		
		function getMail() {
		    if ( !confirm("메일 정보를 가져오시겠습니까?") ) {
		        return false;
		    }
			var a = $("#id").val();
		    var param = {
		    		zlogin_id : a
		    };
		
		    $.ajax({
		        url         : '/PWA/sample/getMail2.do',
		        type        : 'POST',
		        //cache       : false,
		        data        : JSON.stringify(param),
		        contentType : 'application/json; charset=utf-8',
		        //traditional : true,
		        dataType    : 'json',
		        async		: false,
		        success     : function(data) {
		            console.log(data);
		            if ( data.sucess == true ) {
		                location.href = "/html/main.html";
		            }
		            else {
		            	alert("로그인 실패");
		            };
		        },
		        error: function (request, status, error) {
	                alert("code:" + request.status + "\n" + "error:" + error);
	            }
		    });
		}
	</script>
</body>
</html>